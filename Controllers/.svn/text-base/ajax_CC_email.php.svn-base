<?PHP
require_once( "../models/ActionRecord.php");
require_once( "../includes/alex_functions.php");
require_once( "../includes/dispatch_functions.php");

//require_once("../Controllers/EmailInterp.php");

validate_logged_in();
database_connect();

function custom_error_handler($a,$b ="",$c ="",$d ="") { json_error($a . $b . $c . $d); return false;}

$DEBUG = false;
if ( ! $DEBUG)
	{
	 set_error_handler ("custom_error_handler", E_ERROR | E_PARSE | E_ALL);
	}
 else 
 	{
	error_reporting(E_ALL);		
 	echo "DEBUG IS ON";
	}
	
set_time_limit(10);
//$var = json_decode($_GET["request"], true);

database_connect();
$tmp['response'] = email_caller((int)$_GET['DispatchID'] );

echo json_encode($tmp);

/////////////////////////////////////////////////////////////////////////////

?>